#!/bin/sh

pnpm build

# Auto-stage generated artifacts so commits do not fail on first run
git add catalog/groups.json dist

# If anything else is still dirty, fail
if [ -n "$(git status --porcelain)" ]; then
  echo ""
  echo "Working tree still has changes after build."
  echo "Please stage them manually and retry."
  echo ""
  git status --porcelain
  exit 1
fi
